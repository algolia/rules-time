{"version":3,"sources":["App.js","index.js","config.js"],"names":["App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","appID","API_KEY","indexName","query","rules","rule","handleChange","bind","assertThisInitialized","handleSubmit","setRule","e","_this2","target","name","setState","value","algoliasearch","initIndex","searchRules","then","_ref","hits","catch","err","alert","message","from","until","_this3","preventDefault","index","_ref2","objectID","condition","consequence","validity","moment","unix","description","saveRule","res","concat","local","format","console","log","react_default","a","createElement","_this4","map","className","key","onClick","_renderValidity","_metadata","lastUpdate","href","type","placeholder","onChange","onSubmit","_renderRules","App_RenderTime","Component","RenderTime","ReactDOM","render","src_App_0","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.70b1f20b.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport algoliasearch from 'algoliasearch';\nimport './App.css';\nimport moment from 'moment';\nimport {appID, API_KEY, indexName} from './config.js'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      appID: appID || \"932LAAGOT3\",\n      API_KEY: API_KEY || \"API_KEY\",\n      indexName: indexName || \"atis-prods\",\n      query: \"\",\n      rules: [],\n      rule: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.setRule = this.setRule.bind(this);\n  }\n\n  handleChange(e) {\n    switch (e.target.name) {\n      case \"appID\":\n        this.setState({ appID: e.target.value });\n        break;\n      case \"API_KEY\":\n        this.setState({ API_KEY: e.target.value });\n        break;\n      case \"indexName\":\n        this.setState({ indexName: e.target.value });\n        break;\n      case \"query\":\n        if (e.target.value === \"\") {\n          this.setState({ query: e.target.value, rule: \"\", rules: [] });\n        } else {\n          this.setState({ query: e.target.value, rule: \"\" });\n        }\n        const searchClient = algoliasearch(this.state.appID, this.state.API_KEY);\n        const index = searchClient.initIndex(this.state.indexName);\n        index.searchRules(this.state.query)\n          .then(({ hits }) => {\n            this.setState({ rules: hits });\n          })\n          .catch(err => {\n            alert(err.message);\n          })\n        break;\n      case \"from\":\n        this.setState({ from: e.target.value });\n        break;\n      case \"until\":\n        this.setState({ until: e.target.value });\n        break;\n      default:\n        this.setState({ query: e.target.value });\n        break;\n    }\n  }\n   \n  setRule(rule) {\n    this.setState({ rule: rule, rules: [rule] });\n  }\n  \n  handleSubmit(e) {\n    e.preventDefault();\n    const searchClient = algoliasearch(this.state.appID, this.state.API_KEY);\n    const index = searchClient.initIndex(this.state.indexName);\n    if (e.target.name === \"query\") {\n      index.searchRules(this.state.query)\n        .then(({ hits }) => {\n          this.setState({ rules: hits });\n        })\n        .catch(err => alert(err.message));\n    }\n    if (e.target.name === \"time\") {\n      const rule = {\n        objectID: this.state.rule.objectID,\n        condition: this.state.rule.condition,\n        consequence: this.state.rule.consequence,\n        validity: [\n          {\n            from: moment(this.state.from).unix(),\n            until: moment(this.state.until).unix()\n          }\n        ],\n        description: this.state.rule.description,\n      }\n      index.saveRule(rule)\n        .then((res) => {\n          alert(`Saving rule ${rule.objectID} valid from ${moment(this.state.from).local().format('llll')} until ${moment(this.state.until).local().format('llll')}`)\n        })\n        .catch(err => alert(err.message))\n      // alert(`Saving rule ${rule.objectID} valid from ${moment(this.state.from).local().format('llll')} until ${moment(this.state.until).local().format('llll')}`)\n      // index.saveRule(rule).wait()\n      //   .then((res) => {\n      //     alert(`Completed Saving rule ${rule.objectID} valid from ${moment(this.state.from).local().format('llll')} until ${moment(this.state.until).local().format('llll')}`)\n      //   })\n      //   .catch(err => alert(err.message))\n    }\n  }\n  _renderValidity(rule) {\n    console.log(rule)\n    if (rule.validity) {\n      return (<div><div><b>Active From:</b> {moment.unix(rule.validity[0].from).format('llll')}</div><div> <b>Until:</b> {moment.unix(rule.validity[0].until).format('llll')}</div></div>)\n    } else {\n      return (\"\");\n    }\n  }\n  \n  _renderRules() {\n    return this.state.rules.map((rule, index) => (\n      <button className='rule-button' key={index} onClick={() => this.setRule(rule)}>\n        <div>\n          <b>objectID:</b> {rule.objectID}\n        </div>\n        <div>\n          <b>Description:</b> {rule.description || 0}\n        </div>\n        {this._renderValidity(rule)}\n        <div>\n          <b>Last Updated:</b> {moment.unix(rule._metadata.lastUpdate).format('llll') || 0}\n        </div>\n      </button>\n    ))\n  }\n\n  render() {\n    return (\n      <div>\n        <header className=\"header\">\n          <h1 className=\"header-title\">\n            <a href=\"/\">rules-time</a>\n          </h1>\n          <div className=\"input-container\">\n            AppID:\n            <input type=\"text\" name='appID' placeholder={this.state.appID} onChange={this.handleChange} />\n          </div>\n          <div className=\"input-container\">\n            API_KEY:\n            <input type=\"text\" name='API_KEY' placeholder={this.state.API_KEY} onChange={this.handleChange} />\n          </div>\n          <div className=\"input-container\">\n            indexName:\n            <input type=\"text\" name='indexName' placeholder={this.state.indexName} onChange={this.handleChange} />\n          </div>\n        </header>\n\n        <div className=\"container\">\n            <div className=\"search-panel\">\n              <div className=\"search-panel__results\">\n              <form name=\"query\" onSubmit={this.handleSubmit}>\n                <label>\n                  <b>Search for Rule:</b>\n                  <input type=\"text\" name=\"query\" placeholder=\"Search for contexts, descriptions, or strategies\" onChange={this.handleChange} />\n                </label>\n                {/* <input type=\"submit\" name=\"query\" value=\"Look for Rule\" /> */}\n              </form>\n              {this._renderRules()}\n              {(this.state.rule ? \n              <RenderTime \n                  handleChange={this.handleChange}\n                  handleSubmit={this.handleSubmit}\n              /> : \n              \"\")}\n              </div>\n            </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst RenderTime = (props) => {\n  return (\n    <div>\n      <form name=\"time\" onSubmit={props.handleSubmit}>\n        <div>\n          <b>Set Active Time</b>\n        </div>\n        <label>\n          From: <input type=\"text\" name=\"from\" placeholder=\"07-25-2020 08:00 PDT\" onChange={props.handleChange} />\n        </label>\n        <label>\n          Until: <input type=\"text\" name=\"until\" placeholder=\"08-20-2020 15:00 PDT\" onChange={props.handleChange} />\n        </label>\n        <input type=\"submit\" value=\"Submit Change\" />\n      </form>\n    </div>\n  )\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","\nconst appID = \"APPID\";\nconst API_KEY = \"ADMIN_API_KEY\";\nconst indexName = \"products_staging\";\n\nmodule.exports = {\n  appID,\n  API_KEY,\n  indexName\n}"],"sourceRoot":""}
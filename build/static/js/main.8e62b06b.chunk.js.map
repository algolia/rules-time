{"version":3,"sources":["App.js","index.js"],"names":["RenderTime","_ref2","handleSubmit","setFrom","setUntil","react_default","a","createElement","name","onSubmit","type","placeholder","onChange","e","target","value","App","_useState","useState","localStorage","getItem","_useState2","Object","slicedToArray","appID","setAppID","_useState3","_useState4","API_KEY","setAPI_KEY","_useState5","_useState6","indexName","setIndexName","_useState7","_useState8","rules","setRules","_useState9","_useState10","rule","setRule","_useState11","_useState12","from","_useState13","_useState14","until","preventDefault","index","algoliasearch","initIndex","tempRule","objectID","condition","consequence","description","validity","moment","unix","saveRule","then","res","alert","concat","local","format","catch","err","message","className","href","searchRules","_ref","hits","map","key","onClick","setItem","handleSelection","_renderValidity","_metadata","lastUpdate","App_RenderTime","bind","this","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.8e62b06b.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport algoliasearch from 'algoliasearch';\nimport './App.css';\nimport moment from 'moment';\n\n\nfunction App() {\n  const [appID, setAppID] = useState(localStorage.getItem('rules_app_id') || \"appID\");\n  const [API_KEY, setAPI_KEY] = useState(localStorage.getItem('rules_api_key') || \"API_KEY\");\n  const [indexName, setIndexName] = useState(localStorage.getItem('rules_index_name') || \"products_staging\");\n  const [rules, setRules] = useState([]);\n  const [rule, setRule] = useState(\"\");\n  const [from, setFrom] = useState(\"\");\n  const [until, setUntil] = useState(\"\");\n\n  function handleChange(e) {\n    if (e.target.value === \"\") {\n      setRule(\"\")\n      setRules([])\n    } else {\n      setRule(\"\")\n    }\n    const searchClient = algoliasearch(appID, API_KEY);\n    const index = searchClient.initIndex(indexName);\n    index.searchRules(e.target.value)\n    .then(({ hits }) => {\n      setRules(hits)\n    })\n    .catch(err => {\n      alert(err.message);\n    })\n  }\n  \n  function handleSubmit(e) {\n    e.preventDefault();\n    const searchClient = algoliasearch(appID, API_KEY);\n    const index = searchClient.initIndex(indexName);\n    if (e.target.name === \"time\") {\n      const tempRule = {\n        objectID: rule.objectID,\n        condition: rule.condition,\n        consequence: rule.consequence,\n        description: rule.description\n      }\n      if (from && until) tempRule.validity = [\n        {\n          from: moment(from).unix(),\n          until: moment(until).unix()\n        }\n      ]\n      index.saveRule(tempRule)\n        .then((res) => {\n          (tempRule.validity\n            ? alert(`Saving rule ${rule.objectID} valid from ${moment(from).local().format('llll')} until ${moment(until).local().format('llll')}`)\n            : alert(`Saving rule ${rule.objectID} as always on rule`)\n          )\n        })\n        .catch(err => alert(err.message))\n    }\n  }\n  function handleSelection(rule) {\n    setRule(rule);\n    setRules([rule]);\n    localStorage.setItem('rules_app_id', appID);\n    localStorage.setItem('rules_api_key', API_KEY);\n    localStorage.setItem('rules_index_name', indexName);\n  }\n\n  function _renderValidity(rule) {\n    if (rule.validity) {\n      return (<div><div><b>Active From:</b> {moment.unix(rule.validity[0].from).format('llll')}</div><div> <b>Until:</b> {moment.unix(rule.validity[0].until).format('llll')}</div></div>)\n    } else {\n      return (\"\");\n    }\n  }\n  \n  function _renderRules() {\n    return rules.map((rule, index) => (\n      <button className='rule-button' name=\"rule\" key={index} onClick={() => handleSelection(rule)}>\n        <div>\n          <b>objectID:</b> {rule.objectID}\n        </div>\n        <div>\n          <b>Description:</b> {rule.description || 0}\n        </div>\n        {_renderValidity(rule)}\n        <div>\n          <b>Last Updated:</b> {moment.unix(rule._metadata.lastUpdate).format('llll') || 0}\n        </div>\n      </button>\n    ))\n  }\n  \n  return (\n    <div>\n      <header className=\"header\">\n        <h1 className=\"header-title\">\n          <a href=\"/\">rules-time</a>\n        </h1>\n        <div className=\"input-container\">\n          AppID:\n          <input type=\"text\" name='appID' placeholder={appID} onChange={e => setAppID(e.target.value)} />\n        </div>\n        <div className=\"input-container\">\n          WRITE or ADMIN API_KEY:\n          <input type=\"text\" name='API_KEY' placeholder={API_KEY} onChange={e => setAPI_KEY(e.target.value)} />\n        </div>\n        <div className=\"input-container\">\n          indexName:\n          <input type=\"text\" name='indexName' placeholder={indexName} onChange={e=> setIndexName(e.target.value)} />\n        </div>\n      </header>\n\n      <div className=\"container\">\n          <div className=\"search-panel\">\n            <div className=\"search-panel__results\">\n            <form name=\"query\" onSubmit={handleSubmit}>\n              <label>\n                <b>Search for Rule:</b>\n                <input type=\"text\" name=\"query\" placeholder=\"Search for contexts, descriptions, or strategies\" onChange={handleChange} />\n              </label>\n              {/* <input type=\"submit\" name=\"query\" value=\"Look for Rule\" /> */}\n            </form>\n            {_renderRules()}\n            {(rule ? \n            <RenderTime \n                setFrom={setFrom.bind(this)}\n                setUntil={setUntil.bind(this)}\n                handleSubmit={handleSubmit.bind(this)}\n            /> : \n            \"\")}\n            </div>\n          </div>\n      </div>\n    </div>\n  );\n}\n\nconst RenderTime = ({handleSubmit, setFrom, setUntil}) => {\n  return (\n    <div>\n      <form name=\"time\" onSubmit={handleSubmit}>\n        <div>\n          <b>Set Active Time (Leave blank to set permanent)</b>\n        </div>\n        <label>\n          From: <input type=\"text\" name=\"from\" placeholder=\"07-25-2020 08:00 PDT\" onChange={e => setFrom(e.target.value)} />\n        </label>\n        <label>\n          Until: <input type=\"text\" name=\"until\" placeholder=\"08-20-2020 15:00 PDT\" onChange={e => setUntil(e.target.value)} />\n        </label>\n        <input type=\"submit\" value=\"Submit Change\" />\n      </form>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}